# Photo Timeline Import

This feature allows users to import travel events from their photo timeline data into their Lifespan account.

## How It Works

The photo timeline import works in two steps:

1. **Local Processing**: Users download and run a standalone HTML tool locally to process their Photos.app library
2. **Data Import**: Users upload the processed JSON file to create travel spans in their Lifespan account

## Step 1: Process Your Photos Locally

### Download the Tool
1. Go to **Settings → Import Settings → Photo Timeline Import**
2. Click **Download Photo Processor**
3. Save the HTML file to your computer

### Run the Tool
1. Open the downloaded HTML file in your web browser
2. Follow the instructions to export your Photos.app data
3. Process the data to generate a travel timeline
4. Download the generated JSON file

### Exporting Photos.app Data
The easiest way is using Terminal:

```bash
sqlite3 ~/Pictures/Photos\ Library.photoslibrary/database/Photos.sqlite "SELECT ZDATECREATED, ZLATITUDE, ZLONGITUDE, ZDIRECTORY, ZFILENAME FROM ZASSET WHERE ZLATITUDE IS NOT NULL AND ZLONGITUDE IS NOT NULL AND ZLATITUDE != 0 AND ZLONGITUDE != 0 ORDER BY ZDATECREATED;" > ~/Desktop/photos_export.csv
```

This creates a CSV file with your photo location data.

## Step 2: Import to Lifespan

1. Go to **Settings → Import Settings → Photo Timeline Import**
2. Upload the JSON file generated by the photo processor
3. Choose import mode:
   - **Preview Only**: See what will be imported without making changes
   - **Create New**: Create new travel spans
   - **Merge**: Combine with existing data
4. Click **Import Timeline**

## What Gets Created

For each travel period in your timeline, the system creates:

- **Travel Span**: An event span representing your travel to that location
- **Connection**: Links you (personal span) to the travel event
- **Metadata**: Includes source information and photo count

## Data Format

The JSON file should contain an array of travel periods, each with:

```json
{
  "start_date": "2023-06-15",
  "end_date": "2023-06-20",
  "lat": 51.5074,
  "lon": -0.1278,
  "name": "London",
  "country": "GB",
  "photo_count": 45
}
```

## Privacy & Security

- **Photos stay local**: Your actual photos never leave your computer
- **Only metadata**: Only location, date, and count information is uploaded
- **User control**: You decide what to import and can delete imported data

## Troubleshooting

### Common Issues

1. **No personal span**: Create a personal span first in your account
2. **Invalid JSON**: Ensure the file is valid JSON format
3. **Large files**: The tool handles files up to 10MB
4. **Date format**: Use YYYY-MM-DD format for dates

### Getting Help

If you encounter issues:
1. Check the preview to see validation errors
2. Ensure your Photos.app has location data enabled
3. Verify the JSON file structure matches the expected format

## Technical Details

- **File size limit**: 10MB maximum
- **Supported formats**: JSON only
- **Date precision**: Day-level precision for travel events
- **Geolocation**: Latitude/longitude coordinates are preserved
- **Source tracking**: All imports are tagged with source metadata

## Future Enhancements

Planned improvements:
- Direct Photos.app integration (no local processing needed)
- Photo thumbnail previews
- Reverse geocoding for location names
- Integration with existing place spans
- Batch processing for large libraries

